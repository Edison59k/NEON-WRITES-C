<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dashboard - Neon Writers</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <style>
            :root {
                --neon-purple: #8a2be2;
                --neon-pink: #ff00ff;
                --neon-blue: #00ffff;
                --neon-green: #39ff14;
                --dark-bg: #0a0a1a;
                --darker-bg: #050510;
                --card-bg: rgba(20, 20, 40, 0.8);
                --light-text: #ffffff;
                --muted-text: #b0b0d0;
                --gradient-primary: linear-gradient(135deg, #8a2be2, #ff00ff);
                --gradient-secondary: linear-gradient(135deg, #00ffff, #39ff14);
                --glow-purple: 0 0 15px rgba(138, 43, 226, 0.7);
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }

            body {
                background: var(--dark-bg);
                color: var(--light-text);
                min-height: 100vh;
                display: flex;
                flex-direction: column;
            }

            /* Neon Background */
            .neon-background {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1;
                overflow: hidden;
            }

            .neon-grid {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image:
                    linear-gradient(rgba(138, 43, 226, 0.1) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(138, 43, 226, 0.1) 1px, transparent 1px);
                background-size: 50px 50px;
            }

            /* Topbar */
            .topbar {
                background: rgba(10, 10, 26, 0.9);
                backdrop-filter: blur(10px);
                border-bottom: 1px solid rgba(138, 43, 226, 0.3);
                padding: 20px 40px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                position: sticky;
                top: 0;
                z-index: 100;
                box-shadow: var(--glow-purple);
            }

            .brand {
                font-size: 1.8rem;
                font-weight: 700;
                background: var(--gradient-primary);
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
                display: flex;
                align-items: center;
                gap: 10px;
                text-shadow: 0 0 10px rgba(138, 43, 226, 0.5);
                text-decoration: none;
            }

            .brand i {
                font-size: 2rem;
            }

            .user-menu {
                display: flex;
                align-items: center;
                gap: 20px;
            }

            .user-info {
                text-align: right;
            }

            .user-name {
                font-weight: 600;
                font-size: 1.1rem;
            }

            .user-balance {
                color: var(--neon-green);
                font-weight: 600;
            }

            .logout-btn {
                background: rgba(255, 51, 102, 0.2);
                color: #ff3366;
                border: 1px solid rgba(255, 51, 102, 0.5);
                padding: 8px 20px;
                border-radius: 50px;
                text-decoration: none;
                font-weight: 500;
                transition: all 0.3s ease;
            }

            .logout-btn:hover {
                background: rgba(255, 51, 102, 0.4);
                transform: translateY(-2px);
            }

            /* Sidebar */
            .dashboard-container {
                display: flex;
                flex: 1;
            }

            .sidebar {
                width: 250px;
                background: rgba(10, 10, 26, 0.8);
                backdrop-filter: blur(10px);
                border-right: 1px solid rgba(138, 43, 226, 0.3);
                padding: 30px 0;
            }

            .sidebar-menu {
                list-style: none;
            }

            .sidebar-menu li {
                margin-bottom: 5px;
            }

            .sidebar-menu a {
                display: flex;
                align-items: center;
                gap: 15px;
                padding: 15px 30px;
                color: var(--light-text);
                text-decoration: none;
                transition: all 0.3s ease;
                border-left: 4px solid transparent;
            }

            .sidebar-menu a:hover,
            .sidebar-menu a.active {
                background: rgba(138, 43, 226, 0.2);
                border-left-color: var(--neon-purple);
                color: var(--neon-blue);
            }

            .sidebar-menu a i {
                width: 20px;
                text-align: center;
            }

            /* Main Content */
            .main-content {
                flex: 1;
                padding: 40px;
                overflow-y: auto;
            }

            .welcome-section {
                margin-bottom: 40px;
            }

            .welcome-title {
                font-size: 2.2rem;
                margin-bottom: 10px;
                background: var(--gradient-primary);
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
            }

            .welcome-subtitle {
                color: var(--muted-text);
                font-size: 1.1rem;
            }

            /* Stats Cards */
            .stats-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-bottom: 40px;
            }

            .stat-card {
                background: var(--card-bg);
                backdrop-filter: blur(10px);
                border-radius: 15px;
                padding: 25px;
                border: 1px solid rgba(138, 43, 226, 0.2);
                transition: all 0.3s ease;
            }

            .stat-card:hover {
                transform: translateY(-5px);
                border-color: var(--neon-purple);
                box-shadow: var(--glow-purple);
            }

            .stat-icon {
                width: 50px;
                height: 50px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                margin-bottom: 15px;
            }

            .stat-1 .stat-icon {
                background: rgba(138, 43, 226, 0.2);
                color: var(--neon-purple);
            }

            .stat-2 .stat-icon {
                background: rgba(0, 255, 255, 0.2);
                color: var(--neon-blue);
            }

            .stat-3 .stat-icon {
                background: rgba(57, 255, 20, 0.2);
                color: var(--neon-green);
            }

            .stat-4 .stat-icon {
                background: rgba(255, 0, 255, 0.2);
                color: var(--neon-pink);
            }

            .stat-value {
                font-size: 2rem;
                font-weight: 700;
                margin: 5px 0;
            }

            /* Quick Actions */
            .quick-actions {
                margin-bottom: 40px;
            }

            .section-title {
                font-size: 1.8rem;
                margin-bottom: 20px;
                color: var(--light-text);
            }

            .action-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }

            .action-card {
                background: var(--card-bg);
                backdrop-filter: blur(10px);
                border-radius: 15px;
                padding: 25px;
                text-align: center;
                border: 1px solid rgba(138, 43, 226, 0.2);
                transition: all 0.3s ease;
                text-decoration: none;
                color: var(--light-text);
            }

            .action-card:hover {
                transform: translateY(-5px);
                border-color: var(--neon-purple);
                box-shadow: var(--glow-purple);
            }

            .action-icon {
                font-size: 2.5rem;
                margin-bottom: 15px;
                color: var(--neon-purple);
            }

            /* Recent Activity */
            .activity-list {
                background: var(--card-bg);
                backdrop-filter: blur(10px);
                border-radius: 15px;
                padding: 25px;
                border: 1px solid rgba(138, 43, 226, 0.2);
            }

            .activity-item {
                display: flex;
                align-items: center;
                gap: 15px;
                padding: 15px 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .activity-item:last-child {
                border-bottom: none;
            }

            .activity-icon {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: rgba(138, 43, 226, 0.2);
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--neon-purple);
            }

            /* Toast Container */
            #toastContainer {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 1000;
                display: flex;
                flex-direction: column;
                gap: 10px;
                max-width: 350px;
            }

            .toast {
                background: rgba(20, 20, 40, 0.95);
                backdrop-filter: blur(10px);
                border-radius: 10px;
                padding: 15px 20px;
                border-left: 4px solid var(--neon-purple);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                animation: slideIn 0.3s ease;
            }

            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }

                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            /* Responsive */
            @media (max-width: 768px) {
                .dashboard-container {
                    flex-direction: column;
                }

                .sidebar {
                    width: 100%;
                    padding: 20px 0;
                }

                .sidebar-menu {
                    display: flex;
                    overflow-x: auto;
                    padding: 0 20px;
                }

                .sidebar-menu li {
                    flex-shrink: 0;
                    margin-bottom: 0;
                    margin-right: 10px;
                }

                .sidebar-menu a {
                    padding: 10px 20px;
                    white-space: nowrap;
                }

                .main-content {
                    padding: 20px;
                }

                .topbar {
                    padding: 15px 20px;
                    flex-direction: column;
                    gap: 15px;
                }

                .user-menu {
                    width: 100%;
                    justify-content: space-between;
                }
            }
        </style>
    </head>

    <body>
        <!-- Neon Background -->
        <div class="neon-background">
            <div class="neon-grid"></div>
        </div>

        <!-- Toast Container -->
        <div id="toastContainer"></div>

        <!-- Topbar -->
        <div class="topbar">
            <a href="index.html" class="brand">
                <i class="fas fa-feather"></i> Neon Writers
            </a>

            <div class="user-menu">
                <div class="user-info">
                    <div class="user-name" id="userName">Loading...</div>
                    <div class="user-balance" id="userBalance">KES 0</div>
                </div>
                <a href="index.html" class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>

        <!-- Dashboard Container -->
        <div class="dashboard-container">
            <!-- Sidebar -->
            <div class="sidebar">
                <ul class="sidebar-menu">
                    <li><a href="mainpage.html" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="profile.html"><i class="fas fa-user"></i> My Profile</a></li>
                    <li><a href="payments.html"><i class="fas fa-wallet"></i> Payments</a></li>
                    <li><a href="my-bids.html"><i class="fas fa-gavel"></i> My Bids</a></li>
                    <li><a href="assigned-tasks.html"><i class="fas fa-tasks"></i> Assigned Tasks</a></li>
                    <li><a href="completed.html"><i class="fas fa-check-circle"></i> Completed</a></li>
                    <li><a href="support.html"><i class="fas fa-headset">

                            </i> Support</a></li>
                    <!-- Add to sidebar if user is admin -->
                    <li><a href="admin-upload.html"><i class="fas fa-user-shield"></i> Admin Panel</a></li>


                </ul>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Welcome Section -->
                <div class="welcome-section">
                    <h1 class="welcome-title" id="welcomeMessage">Welcome Back!</h1>
                    <p class="welcome-subtitle">Here's what's happening with your account today.</p>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card stat-1">
                        <div class="stat-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="muted">Available Balance</div>
                        <div class="stat-value" id="availableBalance">KES 0</div>
                        <div class="muted">Ready to withdraw</div>
                    </div>

                    <div class="stat-card stat-2">
                        <div class="stat-icon">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <div class="muted">Active Tasks</div>
                        <div class="stat-value" id="activeTasks">0</div>
                        <div class="muted">Currently working on</div>
                    </div>

                    <div class="stat-card stat-3">
                        <div class="stat-icon">
                            <i class="fas fa-money-check-alt"></i>
                        </div>
                        <div class="muted">Total Earned</div>
                        <div class="stat-value" id="totalEarned">KES 0</div>
                        <div class="muted">All time earnings</div>
                    </div>

                    <div class="stat-card stat-4">
                        <div class="stat-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="muted">Success Rate</div>
                        <div class="stat-value" id="successRate">0%</div>
                        <div class="muted">Bid acceptance rate</div>
                    </div>
                </div>


                <a href="payments.html" class="action-card">
                    <div class="action-icon">
                        <i class="fas fa-paper-plane"></i>
                    </div>
                    <h3>Withdraw</h3>
                    <p>Transfer funds to your M-Pesa</p>
                </a>

                <a href="my-bids.html" class="action-card">
                    <div class="action-icon">
                        <i class="fas fa-gavel"></i>
                    </div>
                    <h3>My Bids</h3>
                    <p>Track your submitted bids</p>
                </a>

                <a href="profile.html" class="action-card">
                    <div class="action-icon">
                        <i class="fas fa-user-edit"></i>
                    </div>
                    <h3>Edit Profile</h3>
                    <p>Update your information</p>
                </a>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="recent-activity">
            <h2 class="section-title">Recent Activity</h2>
            <div class="activity-list">
                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-gavel"></i>
                    </div>
                    <div>
                        <div>You placed a bid on "Mobile Banking Survey"</div>
                        <div class="muted" style="font-size: 0.9rem;">KES 3,200 • 2 hours ago</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div>
                        <div>Your bid was accepted for "E-commerce Analysis"</div>
                        <div class="muted" style="font-size: 0.9rem;">KES 4,100 • 1 day ago</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div>
                        <div>Withdrawal processed to M-Pesa</div>
                        <div class="muted" style="font-size: 0.9rem;">KES 5,000 • 2 days ago</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div>
                        <div>You received a 5-star rating</div>
                        <div class="muted" style="font-size: 0.9rem;">Great work! • 3 days ago</div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Check if user is logged in
                const isLoggedIn = localStorage.getItem('neon_writers_logged_in') === 'true';

                if (!isLoggedIn) {
                    showToast('Please log in to access the dashboard', 'error');
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 2000);
                    return;
                }

                // Load user data
                const userData = JSON.parse(localStorage.getItem('neon_writers_user') || '{}');

                // If user hasn't completed subscription, notice only (redirect removed)
                if (!userData.subscribed) {
                    // keep them marked as logged in but require subscription
                    showToast('Complete registration payment to access the dashboard', 'info');
                }

                // Update user information
                document.getElementById('userName').textContent = `${userData.firstName || 'User'} ${userData.lastName || ''}`;
                document.getElementById('welcomeMessage').textContent = `Welcome back, ${userData.firstName || 'Writer'}!`;

                // Update balance from user data
                const balance = userData.balance || 0;
                const totalEarned = userData.totalEarned || 0;
                const activeTasks = userData.completedTasks || 0;
                const successRate = userData.rating ? Math.round((userData.rating / 5) * 100) + '%' : '0%';

                document.getElementById('userBalance').textContent = `KES ${totalEarned.toLocaleString()}`;
                document.getElementById('availableBalance').textContent = `KES ${balance.toLocaleString()}`;
                document.getElementById('totalEarned').textContent = `KES ${totalEarned.toLocaleString()}`;
                document.getElementById('activeTasks').textContent = activeTasks;
                document.getElementById('successRate').textContent = successRate;

                // Toast function
                function showToast(message, type = 'info', duration = 5000) {
                    const container = document.getElementById('toastContainer');
                    const toast = document.createElement('div');
                    toast.className = `toast ${type}`;
                    toast.innerHTML = message;
                    container.appendChild(toast);

                    setTimeout(() => {
                        toast.style.animation = 'slideIn 0.3s ease reverse';
                        setTimeout(() => toast.remove(), 300);
                    }, duration);
                }

                // Logout function
                document.getElementById('logoutBtn').addEventListener('click', function (e) {
                    e.preventDefault();
                    localStorage.removeItem('neon_writers_logged_in');
                    showToast('Logged out successfully', 'success');
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 1500);
                });

                // Welcome message
                showToast(`Welcome to your dashboard, ${userData.firstName || 'Writer'}!`, 'success');
            });
        </script>
        <script src="validate.js"></script>
    </body>

</html>